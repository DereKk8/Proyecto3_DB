---- Agregar un atributo “valortotal”, donde se registrará el valor total del pedido 
que realiza un cliente------------

ALTER TABLE PEDIDOS 
ADD VALORTOTAL NUMBER(15,2);

UPDATE PEDIDOS p
SET VALORTOTAL = (
  SELECT NVL(SUM(dp.CANTIDAD * dp.PRECIOUNIDAD),0)
  FROM DETALLEPEDIDOS dp
  WHERE dp.CODIGOPEDIDO = p.CODIGOPEDIDO
);

Elaborar unos disparadores que permitan realizar el proceso de auditoria a 
las tablas, clientes y pedidos, para los procesos de inserción, actualización y 
borrado

CREATE OR REPLACE TRIGGER TRG_VALORTOTAL
BEFORE INSERT OR UPDATE OR DELETE ON DETALLEPEDIDOS
FOR EACH ROW
BEGIN
  DECLARE
    total NUMBER(15,2);
  BEGIN
    SELECT NVL(SUM(CANTIDAD * PRECIOUNIDAD), 0) INTO total
    FROM DETALLEPEDIDOS
    WHERE CODIGOPEDIDO = :NEW.CODIGOPEDIDO;

    UPDATE PEDIDOS
    SET VALORTOTAL = total
    WHERE CODIGOPEDIDO = :NEW.CODIGOPEDIDO;
  END;
END;

INSERT INTO DETALLEPEDIDOS (CODIGOPEDIDO, CODIGOPRODUCTO, CANTIDAD, PRECIOUNIDAD, NUMEROLINEA)
VALUES (1, 'FR-51', 5, 100.00, 1);

SELECT * FROM PEDIDOS 
WHERE CODIGOPEDIDO = 1;
